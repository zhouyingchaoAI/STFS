# 更新日志

本文档记录了 STFS_V1 项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [Unreleased]

### 计划中
- 断面客流预测功能
- 换乘客流预测功能
- 区域客流预测功能
- Redis缓存支持
- 实时客流监控
- 预测结果对比分析

---

## [2.1.0] - 2025-01-15

### 新增
- ✨ 支持多种客流类型（线网线路、车站、断面、换乘、区域）
- ✨ 支持多种客流指标（客运量、进站量、出站量、换乘量、乘降量）
- ✨ 新增 Transformer 算法支持
- ✨ 新增 LightGBM 算法支持
- ✨ 完整的 RESTful API 接口
- ✨ Swagger/OpenAPI 文档自动生成
- ✨ 支持每条线路独立配置算法权重
- ✨ 新增早晨时段特殊处理（6点前纯历史偏移）
- ✨ 新增自动化任务调度系统
- ✨ 新增模型版本管理功能

### 改进
- 🎨 全新深色主题 UI 设计
- ⚡ 优化 KNN 模型训练速度（提升30%）
- ⚡ 优化数据库查询性能
- 📊 改进预测结果可视化，支持多线路对比
- 🔧 完善配置文件管理，支持 YAML 格式
- 📝 重写项目文档，更加详细和专业
- 🏗️ 重构代码架构，提升可维护性
- 🔐 增强API安全性，添加请求验证

### 修复
- 🐛 修复 KNN 早晨时段预测异常问题
- 🐛 修复数据库连接池泄漏
- 🐛 修复中文字体显示问题
- 🐛 修复模型文件路径错误
- 🐛 修复预测结果保存失败问题
- 🐛 修复日期格式验证错误
- 🐛 修复线路编号前导零丢失问题

### 变更
- 🔄 调整配置文件命名规则
- 🔄 统一API响应格式
- 🔄 重组项目目录结构

### 移除
- 🗑️ 删除冗余的备份文件
- 🗑️ 删除未使用的测试脚本
- 🗑️ 清理临时日志文件

---

## [2.0.0] - 2024-09-15

### 新增
- ✨ 重构项目架构，采用模块化设计
- ✨ 新增 FastAPI 后端服务
- ✨ 支持车站客流预测
- ✨ 新增 XGBoost 算法支持
- ✨ 新增 Prophet 算法支持
- ✨ 实现自动化任务调度
- ✨ 添加 Supervisor 进程管理
- ✨ 支持 Docker 容器化部署

### 改进
- ⚡ 显著提升预测性能（2-3倍）
- 📦 模块化代码结构
- 🔐 增强数据安全性
- 📊 改进数据可视化效果
- 🔧 优化配置管理

### 修复
- 🐛 修复 LSTM 模型训练不稳定问题
- 🐛 修复内存泄漏问题
- 🐛 修复数据预处理错误
- 🐛 修复预测结果偏差大的问题

### 变更
- 🔄 数据库表结构调整
- 🔄 API 接口重新设计
- 🔄 配置文件格式变更

---

## [1.5.0] - 2024-06-20

### 新增
- ✨ 添加模型训练进度显示
- ✨ 支持批量预测
- ✨ 新增预测结果导出功能

### 改进
- ⚡ 优化数据加载速度
- 📊 增强图表交互性
- 🔧 改进错误提示信息

### 修复
- 🐛 修复节假日特征处理错误
- 🐛 修复预测日期范围限制
- 🐛 修复UI响应延迟

---

## [1.0.0] - 2024-04-26

### 新增
- 🎉 首次正式发布
- ✨ 基础客流预测功能
- ✨ Streamlit Web 界面
- ✨ KNN 算法支持
- ✨ LSTM 算法支持
- ✨ 日客流预测（15天）
- ✨ 小时客流预测（24小时）
- ✨ 预测结果可视化
- ✨ 数据库集成
- ✨ 模型训练和推理

### 功能
- 📊 支持线网线路客流预测
- 📈 支持历史数据对比
- 🎨 美观的用户界面
- ⚙️ 灵活的参数配置
- 📁 模型文件管理

---

## [0.9.0] - 2024-03-15 [Beta]

### 新增
- 🚧 Beta 版本发布
- ✨ 核心预测功能实现
- ✨ 基础 UI 界面
- ✨ 数据库连接

### 已知问题
- ⚠️ 预测精度需要优化
- ⚠️ UI 性能待提升
- ⚠️ 部分功能不稳定

---

## [0.5.0] - 2024-01-20 [Alpha]

### 新增
- 🚧 Alpha 版本发布
- ✨ 基础框架搭建
- ✨ KNN 模型实现
- ✨ 简单预测功能

### 限制
- ⚠️ 仅支持单线路预测
- ⚠️ 功能不完整
- ⚠️ 测试版本

---

## 版本说明

### 版本号规则

版本号格式：`主版本号.次版本号.修订号`

- **主版本号**：不兼容的 API 修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正

### 变更类型

- `新增` - 新功能
- `改进` - 对现有功能的改进
- `修复` - Bug 修复
- `变更` - 破坏性变更
- `移除` - 删除的功能
- `安全` - 安全性修复
- `废弃` - 即将删除的功能

---

## 贡献

如果您发现任何问题或有改进建议，欢迎：

1. 提交 [Issue](https://github.com/your-repo/STFS_V1/issues)
2. 提交 [Pull Request](https://github.com/your-repo/STFS_V1/pulls)
3. 参与讨论

---

[Unreleased]: https://github.com/your-repo/STFS_V1/compare/v2.1.0...HEAD
[2.1.0]: https://github.com/your-repo/STFS_V1/compare/v2.0.0...v2.1.0
[2.0.0]: https://github.com/your-repo/STFS_V1/compare/v1.5.0...v2.0.0
[1.5.0]: https://github.com/your-repo/STFS_V1/compare/v1.0.0...v1.5.0
[1.0.0]: https://github.com/your-repo/STFS_V1/compare/v0.9.0...v1.0.0
[0.9.0]: https://github.com/your-repo/STFS_V1/compare/v0.5.0...v0.9.0
[0.5.0]: https://github.com/your-repo/STFS_V1/releases/tag/v0.5.0

